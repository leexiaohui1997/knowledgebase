# 右键菜单功能说明

## 📋 功能概述

应用已支持全面的右键菜单功能，提供快捷的上下文操作。

---

## 🖱️ 使用场景

### 1️⃣ 知识库列表页

#### 空白区域右键
在知识库列表的空白处右键，显示菜单：
- **➕ 创建知识库** - 快速打开创建知识库弹窗

#### 知识库卡片右键
在任意知识库卡片上右键，显示菜单：
- **📂 打开** - 进入知识库详情页
- **✏️ 编辑** - 编辑知识库（名称、图标、简介）
- **---** （分隔线）
- **🗑️ 删除** - 删除知识库及所有文档

---

### 2️⃣ 知识库详情页

#### 文档目录空白区域右键
在左侧文档目录的空白处右键，显示菜单：
- **📄 新建文件** - 在根目录创建文件
- **📁 新建文件夹** - 在根目录创建文件夹

#### 文件夹右键
在文件夹节点上右键，显示菜单：
- **📄 新建文件** - 在该文件夹内创建文件
- **📁 新建文件夹** - 在该文件夹内创建子文件夹
- **---** （分隔线）
- **✏️ 重命名** - 重命名文件夹
- **---** （分隔线）
- **🗑️ 删除** - 删除文件夹及其所有内容

#### 文件右键
在文件节点上右键，显示菜单：
- **✏️ 重命名** - 重命名文件
- **---** （分隔线）
- **🗑️ 删除** - 删除文件

---

## ✨ 新增功能

### 编辑知识库
现在可以修改已创建的知识库：
1. 右键知识库卡片
2. 选择「✏️ 编辑」
3. 修改名称、图标或简介
4. 点击「保存」

### 重命名文档
现在可以重命名文件和文件夹：
1. 右键文件或文件夹
2. 选择「✏️ 重命名」
3. 输入新名称
4. 点击「保存」或按回车键

---

## 🎯 操作技巧

### 快捷创建
- 在文件夹上右键 → 可直接在其内创建子项
- 在空白处右键 → 在根目录创建

### 快速访问
- 右键菜单提供了所有常用操作
- 无需寻找按钮或悬停显示操作图标

### 批量操作
- 虽然目前不支持多选，但右键菜单让单个操作更快捷
- 未来可扩展为支持批量操作

---

## 🎨 交互细节

### 菜单定位
- 菜单自动显示在鼠标位置
- 智能检测边界，防止超出屏幕
- 当菜单接近屏幕边缘时自动调整位置

### 菜单隐藏
- 点击菜单项后自动关闭
- 点击菜单外部自动关闭
- 滚动页面时自动关闭
- 右键其他区域时自动关闭

### 视觉反馈
- 悬停菜单项时高亮显示
- 使用表情图标增强识别性
- 分隔线区分不同类型的操作
- 禁用项显示为灰色（当前未使用）

### 防误操作
- 右键菜单不会意外触发左键点击
- 删除操作仍需二次确认
- 事件冒泡被正确处理

---

## 💡 使用建议

### 提高效率
1. **习惯右键** - 右键菜单比寻找按钮更快
2. **熟记位置** - 常用操作总是在相同位置
3. **利用键盘** - 弹窗中可使用回车键确认

### 操作流程
**创建文档结构**：
```
1. 右键空白区域 → 新建文件夹「项目A」
2. 右键「项目A」→ 新建文件「需求文档」
3. 右键「项目A」→ 新建文件「设计方案」
```

**整理文档**：
```
1. 右键文件 → 重命名
2. 右键文件夹 → 删除（不需要的）
3. 右键知识库 → 编辑（更新简介）
```

---

## 🔧 技术实现

### 组件架构
```
ContextMenu.vue (通用右键菜单组件)
    ↓
KnowledgeBaseList.vue (知识库列表页)
KnowledgeBaseDetail.vue (知识库详情页)
    ↓
DocumentTree.vue (文档树组件)
```

### 关键特性
- **Teleport 到 body** - 避免 z-index 问题
- **位置自适应** - 智能边界检测
- **事件监听** - 点击外部、滚动时自动关闭
- **TypeScript 类型** - MenuItem 接口定义
- **响应式状态** - 动态生成菜单项

### 菜单项配置
```typescript
interface MenuItem {
  label: string      // 菜单文字
  icon?: string      // 表情图标
  action: () => void // 点击回调
  divider?: boolean  // 是否为分隔线
  disabled?: boolean // 是否禁用
}
```

---

## 🚀 未来扩展

### 计划功能
- [ ] 复制/粘贴文档
- [ ] 移动文档到其他文件夹
- [ ] 多选批量操作
- [ ] 自定义快捷键
- [ ] 收藏/取消收藏
- [ ] 导出为 Markdown 文件
- [ ] 文档属性查看

### 优化方向
- 键盘导航支持（方向键选择菜单项）
- 子菜单支持（嵌套菜单）
- 图标库扩展
- 操作历史记录
- 撤销/重做功能

---

## 📝 注意事项

1. **删除操作不可恢复** - 删除前请确认
2. **重命名即时生效** - 修改后立即保存
3. **编辑不影响文档** - 编辑知识库信息不影响其下文档
4. **菜单智能显示** - 根据上下文显示不同选项

---

**享受更高效的右键操作体验！** 🖱️✨

